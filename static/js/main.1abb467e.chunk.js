(this["webpackJsonpcanvas-workflow-example"]=this["webpackJsonpcanvas-workflow-example"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(5);var r=n(0),o=n.n(r),i=n(2),l=n.n(i),a=n(3);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d=["nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize"];var f,v,h,m,y,w,x,p,b=function(e){for(var t=[],n=1;n<=8;n++){var r={x:0,y:0,w:7,h:7};[1,7,8].includes(n)?r.x=e.x-3-3.5:[2,6].includes(n)?r.x=e.x+e.w/2+1.5-3.5:[3,4,5].includes(n)&&(r.x=e.x+e.w+3-3.5),[1,2,3].includes(n)?r.y=e.y-3-3.5:[4,8].includes(n)?r.y=e.y+e.h/2+1.5-3.5:[5,6,7].includes(n)&&(r.y=e.y+e.h+3-3.5),t.push(r)}return t},g=!1,C=!1,E=-1,k=-1,S={x:0,y:0},T={x:0,y:0,w:0,h:0},j={x:0,y:0},O=function(){v&&(v.removeEventListener("mousedown",L),v.removeEventListener("mousemove",R))},L=function(e){if(f.length){for(var t,n=[].concat(f).reverse(),r=A(e),o=function(){var e=t.value,o={x:e.x,y:e.y,w:0,h:0};switch(e.type){case"box":var i=e;o.w=i.w,o.h=i.h}if(!g&&z(r.x,r.y,o))return g=!0,E=function(e,t){var n=e.length,r=e.indexOf(t);return-1===r?-1:n-r-1}(n,e),S.x=r.x-e.x,S.y=r.y-e.y,v.addEventListener("mouseup",W),"break";if(!C&&-1!==E&&(b(o).every((function(e,t){return!z(r.x,r.y,e)||(C=!0,j=c({},r),T=c({},o),k=t,v.addEventListener("mouseup",W),!1)})),C))return"break"},i=u(n);!(t=i()).done;){if("break"===o())break}g||C||(E=-1,k=-1),B()}},R=function(e){var t=A(e);if(g&&!C&&-1!==E)f[E].x=t.x-S.x,f[E].y=t.y-S.y,h();else if(C&&-1!==E){var n=j.x-t.x,r=j.y-t.y,o=t.x-j.x,i=t.y-j.y;[0,6,7].includes(k)&&(f[E].x=T.x-n,f[E].w=T.w+n),[0,1,2].includes(k)&&(f[E].y=T.y-r,f[E].h=T.h+r),[2,3,4].includes(k)&&(f[E].w=T.w+o),[4,5,6].includes(k)&&(f[E].h=T.h+i),f[E].w<=50&&(f[E].w=50),f[E].h<=50&&(f[E].h=50),h()}else f.every((function(e,n){var r={x:e.x,y:e.y,w:0,h:0};switch(e.type){case"box":var o=e;r.w=o.w,r.h=o.h}if(z(t.x,t.y,r))return v.style.cursor="move",!1;v.style.cursor="default";var i=!1;n===E&&b(r).every((function(e,n){return!z(t.x,t.y,e)||(v.style.cursor=d[n]||"move",i=!0,!1)}));return!i}))},W=function e(){g=!1,C=!1,v.removeEventListener("mouseup",e)},z=function(e,t,n){return e>n.x&&t>n.y&&e<n.w+n.x&&t<n.h+n.y},A=function(e){var t=v.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},B=function(){if(v){var e=new CustomEvent("cwComponentSelected",{detail:{index:E,component:f[E]}});v.dispatchEvent(e)}},M=function(e,t,n,r,o,i){var l=function(e){return"number"!==typeof e?c({},{tl:0,tr:0,br:0,bl:0},e):{tl:e,tr:e,br:e,bl:e}}(i);e.moveTo(t+l.tl,n),e.lineTo(t+r-l.tr,n),e.quadraticCurveTo(t+r,n,t+r,n+l.tr),e.lineTo(t+r,n+o-l.br),e.quadraticCurveTo(t+r,n+o,t+r-l.br,n+o),e.lineTo(t+l.bl,n+o),e.quadraticCurveTo(t,n+o,t,n+o-l.bl),e.lineTo(t,n+l.tl),e.quadraticCurveTo(t,n,t+l.tl,n),e.closePath()},N=function(e,t,n,r,o,i){if((i=i||0)<=0)e.fillText(t,n,r);else{for(var l=t.split(" "),a=0,c=1;l.length>0&&c<=l.length;){var s=l.slice(0,c).join(" ");e.measureText(s).width>i?(1==c&&(c=2),e.fillText(l.slice(0,c-1).join(" "),n,r+o*a),a++,l=l.splice(c-1),c=1):c++}c>0&&e.fillText(l.join(" "),n,r+o*a)}},P={height:500,background:"#f5f5f5",hoverColor:"#0000ff",strokeColor:"#000000",selectionStrokeColor:"#7f7f7f",selectionLineWidth:1,lineWidth:1,fontSize:16,fontFamily:"Arial",borderRadius:3},q={},I=function(e){var t,n,r=e.parent,o=e.canvas,i=e.mode,l=e.data;m=r,y=o,x=i||"editor",w=o.getContext("2d"),l&&(q=l),J(),"editor"===x&&null!==(t=q)&&void 0!==t&&null!==(n=t.components)&&void 0!==n&&n.length?function(e,t,n){f=t,h=n,(v=e).addEventListener("mousedown",L),v.addEventListener("mousemove",R)}(y,q.components,J):O(),window.addEventListener("resize",F),y.addEventListener("cwComponentSelected",D)},D=function(e){p=e.detail.index,J()},F=function(e,t){var n,r=this;return void 0===t&&(t=300),function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];window.clearTimeout(n),n=window.setTimeout((function(){e.apply(r,i)}),t)}}((function(){return J()})),J=function(){if(m&&y&&w){var e,t=m.getBoundingClientRect();y.width=t.width,y.height=q.height||P.height,y&&w&&w.clearRect(0,0,y.width,y.height),H(),null!==(e=q)&&void 0!==e&&e.components&&q.components.forEach((function(e){U(e)}))}},H=function(){y&&w&&(w.translate(.5,.5),w.fillStyle=q.background||P.background,w.fillRect(0,0,y.width,y.height))},U=function(e){switch(e.type){case"box":!function(e,t,n){if(n){var r=e.fontSize||t.fontSize;n.save(),n.beginPath(),M(n,e.x,e.y,e.w,e.h,e.borderRadius||t.borderRadius),e.fillColor&&(n.fillStyle=e.fillColor,n.fill()),n.lineWidth=e.lineWidth||t.lineWidth,n.strokeStyle=e.strokeColor||e.fillColor||t.strokeColor,n.stroke(),n.clip(),n.font=r+"px "+e.fontFamily,n.fillStyle=e.textColor||t.strokeColor,n.fillText(e.title,e.x+5+n.lineWidth,e.y+5+r+n.lineWidth-5),e.description&&N(n,e.description,e.x+5+n.lineWidth,e.y+10+2*r+n.lineWidth-5,r,e.w-10-n.lineWidth),n.restore()}}(e,P,w)}!function(e,t,n,r,o,i){var l;if(i&&"editor"===o&&n>-1&&null!==(l=t.components)&&void 0!==l&&l.length&&n===t.components.indexOf(e)){var a={x:e.x,y:e.y,w:0,h:0};switch(e.type){case"box":var c=e;a.w=c.w,a.h=c.h}i.save(),i.beginPath(),i.lineWidth=t.selectionLineWidth||r.selectionLineWidth,i.setLineDash([5,5]),i.strokeStyle=t.selectionStrokeColor||r.selectionStrokeColor,i.rect(a.x-3,a.y-3,a.w+6,a.h+6),i.stroke(),i.restore(),i.save(),i.beginPath(),i.fillStyle=t.selectionStrokeColor||r.selectionStrokeColor;for(var s,d=u(b(a));!(s=d()).done;){var f=s.value;i.rect(f.x,f.y,f.w,f.h)}i.fill(),i.restore()}}(e,q,p,P,x,w)},X=function(e){var t=e.mode,n=void 0===t?"editor":t,i=e.defaultData,l=e.data,a=Object(r.useState)(n),s=a[0],u=a[1],d=Object(r.useState)(l||i),f=d[0],v=d[1],h=Object(r.createRef)(),m=Object(r.createRef)();Object(r.useEffect)((function(){u(n),v(l)}),[n,l]),Object(r.useEffect)((function(){return h.current&&m.current&&I({parent:m.current,canvas:h.current,mode:s,data:f}),function(){window.removeEventListener("resize",F),y.removeEventListener("cwComponentSelected",D),O()}}),[h,m,s,f]);return o.a.createElement("div",{className:"canvas-workflow"},o.a.createElement("div",{className:"cw-tools"},o.a.createElement("div",{className:""},o.a.createElement("div",null,"Tool Box"))),o.a.createElement("div",{className:"cw-wrapper",ref:m},o.a.createElement("canvas",{ref:h})),o.a.createElement("div",{className:"cw-settings"},o.a.createElement("div",{onClick:function(){return u("viewer")}},"settings"),o.a.createElement("button",{onClick:function(){var e,t,n=Math.floor(Math.random()*((null===(e=h.current)||void 0===e?void 0:e.width)||100)),r=Math.floor(Math.random()*((null===(t=h.current)||void 0===t?void 0:t.height)||100)),o={type:"box",title:"Random",description:"Random "+n+":"+r,x:n,y:r,w:150,h:100,fillColor:"#ffffff",strokeColor:"#ccc",borderRadius:2};v(c({},f,{components:[].concat((null===f||void 0===f?void 0:f.components)||[],[o])}))}},"Add Random Box"),o.a.createElement("button",{onClick:function(){v(c({},f,{components:[]}))}},"Clear All")))},Y=(n(10),function(){var e=Object(r.useState)(),t=Object(a.a)(e,2),n=t[0],i=t[1];Object(r.useEffect)((function(){i({components:[{type:"box",title:"Rumesh",description:"Hello my name is rumesh udash",x:100,y:100,w:150,h:100,fillColor:"red",strokeColor:"green",lineWidth:1,borderRadius:5}]})}),[]);return o.a.createElement("div",null,o.a.createElement(X,{mode:"editor",data:n,onDataChange:function(e){i(e)}}))});l.a.render(o.a.createElement(Y,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.1abb467e.chunk.js.map