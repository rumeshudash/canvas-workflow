(this["webpackJsonpcanvas-workflow-example"]=this["webpackJsonpcanvas-workflow-example"]||[]).push([[0],{10:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);n(10);var o=n(0),r=n.n(o),a=n(8),i=n.n(a),c=n(4),l=n(5),u=n(6),d=n(1);var s,f,v,m,h,b,p,w,y=function(e,t){var n=e.length,o=e.indexOf(t);return-1===o?-1:n-o-1},x=!1,E=-1,g={x:0,y:0},C=function(){f&&(f.removeEventListener("mousedown",O),f.removeEventListener("mousemove",j))},O=function(e){if(s.length){var t,n=Object(u.a)(s).reverse(),o=T(e),r=Object(l.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(!x&&"box"===a.type&&R(o.x,o.y,a)){x=!0,E=y(n,a),g.x=o.x-a.x,g.y=o.y-a.y,f.addEventListener("mouseup",k);break}}}catch(i){r.e(i)}finally{r.f()}S()}},j=function(e){var t=T(e);if(f.style.cursor="default",-1!==E)s[E].x=t.x-g.x,s[E].y=t.y-g.y,v(),f.style.cursor="move";else{var n,o=Object(l.a)(s);try{for(o.s();!(n=o.n()).done;){var r=n.value;if("box"===r.type&&R(t.x,t.y,r)){f.style.cursor="move";break}}}catch(a){o.e(a)}finally{o.f()}}},k=function e(){x=!1,E=-1,f.removeEventListener("mouseup",e)},R=function(e,t,n){return e>n.x&&t>n.y&&e<n.w+n.x&&t<n.h+n.y},T=function(e){var t=f.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},S=function(){if(f){var e=new CustomEvent("cwComponentSelected",{detail:{index:E,component:s[E]}});f.dispatchEvent(e)}},L=500,W="#eeeeee",M="#000000",B=1,N=16,q=3,D={},z=function(e){var t,n,o=e.parent,r=e.canvas,a=e.mode,i=e.data;m=o,h=r,p=a||"editor",b=r.getContext("2d"),i&&(D=i),J(),"editor"===p&&null!==(t=D)&&void 0!==t&&null!==(n=t.components)&&void 0!==n&&n.length?function(e,t,n){s=t,v=n,(f=e).addEventListener("mousedown",O),f.addEventListener("mousemove",j)}(h,D.components,J):C(),window.addEventListener("resize",P),h.addEventListener("cwComponentSelected",A)},A=function(e){w=e.detail.index,J()},P=function(e){var t,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];window.clearTimeout(t),t=window.setTimeout((function(){e.apply(n,a)}),o)}}((function(){return J()})),J=function(){if(m&&h&&b){var e,t=m.getBoundingClientRect();h.width=t.width,h.height=D.height||L,h&&b&&b.clearRect(0,0,h.width,h.height),F(),null!==(e=D)&&void 0!==e&&e.components&&D.components.forEach((function(e){I(e)}))}},F=function(){h&&b&&(b.translate(.5,.5),b.fillStyle=D.background||W,b.fillRect(0,0,h.width,h.height))},I=function(e){switch(e.type){case"box":X(e)}},X=function(e){var t;if(b){var n=e.fontSize||N;if(b.save(),b.beginPath(),Y(b,e.x,e.y,e.w,e.h,e.borderRadius),e.fillColor&&(b.fillStyle=e.fillColor,b.fill()),b.lineWidth=e.lineWidth||B,b.strokeStyle=e.strokeColor||e.fillColor||M,b.stroke(),b.clip(),b.font="".concat(n,"px ").concat(e.fontFamily),b.fillStyle=e.textColor||M,b.fillText(e.text,e.x+5+b.lineWidth,e.y+5+n+b.lineWidth-5),b.restore(),"editor"===p&&w>-1&&null!==(t=D.components)&&void 0!==t&&t.length&&w===D.components.indexOf(e)){b.save(),b.beginPath(),b.lineWidth=e.lineWidth||B,b.setLineDash([5,5]),b.strokeStyle="blue",Y(b,e.x-2,e.y-2,e.w+4,e.h+4,e.borderRadius),b.stroke(),b.restore()}}},Y=function(e,t,n,o,r,a){var i=function(e){return"number"!==typeof e?Object(d.a)(Object(d.a)({},{tl:0,tr:0,br:0,bl:0}),e):{tl:e,tr:e,br:e,bl:e}}(a||q);e.moveTo(t+i.tl,n),e.lineTo(t+o-i.tr,n),e.quadraticCurveTo(t+o,n,t+o,n+i.tr),e.lineTo(t+o,n+r-i.br),e.quadraticCurveTo(t+o,n+r,t+o-i.br,n+r),e.lineTo(t+i.bl,n+r),e.quadraticCurveTo(t,n+r,t,n+r-i.bl),e.lineTo(t,n+i.tl),e.quadraticCurveTo(t,n,t+i.tl,n),e.closePath()},G=function(e){var t=e.mode,n=void 0===t?"editor":t,a=e.defaultData,i=e.data,l=(e.onDataChange,Object(o.useState)(n)),s=Object(c.a)(l,2),f=s[0],v=s[1],m=Object(o.useState)(i||a),b=Object(c.a)(m,2),p=b[0],w=b[1],y=Object(o.createRef)(),x=Object(o.createRef)();Object(o.useEffect)((function(){v(n),w(i)}),[n,i]),Object(o.useEffect)((function(){return y.current&&x.current&&z({parent:x.current,canvas:y.current,mode:f,data:p}),function(){window.removeEventListener("resize",P),h.removeEventListener("cwComponentSelected",A),C()}}),[y,x,f,p]);return r.a.createElement("div",{className:"canvas-workflow"},r.a.createElement("div",{className:"cw-tools"},r.a.createElement("div",{className:""},r.a.createElement("div",null,"Tool Box"))),r.a.createElement("div",{className:"cw-wrapper",ref:x},r.a.createElement("canvas",{ref:y})),r.a.createElement("div",{className:"cw-settings"},r.a.createElement("div",{onClick:function(){return v("viewer")}},"settings"),r.a.createElement("button",{onClick:function(){var e,t,n=Math.floor(Math.random()*((null===(e=y.current)||void 0===e?void 0:e.width)||100)),o=Math.floor(Math.random()*((null===(t=y.current)||void 0===t?void 0:t.height)||100)),r={type:"box",x:n,y:o,w:100,h:100,fillColor:"green",text:"Random "+n+":"+o,borderRadius:Math.floor(15*Math.random())};w(Object(d.a)(Object(d.a)({},p),{},{components:[].concat(Object(u.a)((null===p||void 0===p?void 0:p.components)||[]),[r])}))}},"Add Random Box"),r.a.createElement("button",{onClick:function(){w(Object(d.a)(Object(d.a)({},p),{},{components:[]}))}},"Clear All")))},H=(n(15),function(){var e=Object(o.useState)(),t=Object(c.a)(e,2),n=t[0],a=t[1];Object(o.useEffect)((function(){a({components:[{type:"box",text:"Rumesh",x:10,y:10,w:150,h:100,fillColor:"red",strokeColor:"green",lineWidth:1,borderRadius:5}]})}),[]);return r.a.createElement("div",null,r.a.createElement(G,{mode:"editor",data:n,onDataChange:function(e){a(e)}}))});i.a.render(r.a.createElement(H,null),document.getElementById("root"))},9:function(e,t,n){e.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.af8b7cda.chunk.js.map