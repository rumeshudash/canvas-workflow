(this["webpackJsonpcanvas-workflow-example"]=this["webpackJsonpcanvas-workflow-example"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(5);var o=n(0),r=n.n(o),i=n(2),a=n.n(i),l=n(3);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var u="CanvasWorkflow:";var f,s,d,v,m,h,p=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).log.apply(e,[u].concat(n))},w=!1,x=-1,y={x:0,y:0},g=function(e){if(f.length){var t=[].concat(f).reverse(),n=k(e);t.map((function(e){if(!w&&"box"===e.type&&C(n.x,n.y,e))return w=!0,x=function(e,t){var n=e.length,o=e.indexOf(t);return-1===o?-1:n-o-1}(t,e),y.x=n.x-e.x,y.y=n.y-e.y,s.addEventListener("mousemove",E),void s.addEventListener("mouseup",b)}))}},E=function(e){if(-1!==x){var t=k(e);f[x].x=t.x-y.x,f[x].y=t.y-y.y,d()}},b=function e(){w=!1,x=-1,s.removeEventListener("mousemove",E),s.removeEventListener("mouseup",e)},C=function(e,t,n){return n.x>0&&e>n.x&&n.y>0&&t>n.y&&e<n.w+n.x&&t<n.h+n.y&&(p("Collision: ",n.text),!0)},k=function(e){var t=s.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},O={height:500,background:"#eeeeee",hoverColor:"#0000ff",strokeColor:"#000000",lineWidth:1,fontSize:16,fontFamily:"Arial"},j={},S=function(e){var t,n,o=e.parent,r=e.canvas,i=e.data;v=o,m=r,h=r.getContext("2d"),i&&(j=i),W(),null!==(t=j)&&void 0!==t&&null!==(n=t.components)&&void 0!==n&&n.length&&function(e,t,n){f=t,d=n,(s=e).addEventListener("mousedown",g)}(m,j.components,W),window.addEventListener("resize",L)},R=function(){window.removeEventListener("resize",L),s&&s.removeEventListener("mousedown",g)},L=function(e,t){var n,o=this;return void 0===t&&(t=300),function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];window.clearTimeout(n),n=window.setTimeout((function(){e.apply(o,i)}),t)}}((function(){return W()})),W=function(){if(v&&m&&h){var e,t=v.getBoundingClientRect();m.width=t.width,m.height=j.height||O.height,m&&h&&(h.clearRect(0,0,m.width,m.height),p("Canvas Cleared!")),z(),null!==(e=j)&&void 0!==e&&e.components&&j.components.forEach((function(e){A(e)}))}},z=function(){m&&h&&(h.translate(.5,.5),h.fillStyle=j.background||O.background,h.fillRect(0,0,m.width,m.height))},A=function(e){switch(e.type){case"box":B(e)}},B=function(e){if(h){var t=e.fontSize||O.fontSize;h.save(),h.beginPath(),e.fillColor&&(h.fillStyle=e.fillColor,h.rect(e.x,e.y,e.w,e.h),h.fill()),h.lineWidth=e.lineWidth||O.lineWidth,h.strokeStyle=e.strokeColor||O.strokeColor,h.rect(e.x,e.y,e.w,e.h),h.stroke(),h.clip(),h.font=t+"px "+e.fontFamily,h.fillStyle=e.textColor||O.strokeColor,h.fillText(e.text,e.x+5+h.lineWidth,e.y+5+t+h.lineWidth-5),h.restore()}},N=function(e){var t=e.mode,n=void 0===t?"editor":t,i=e.defaultData,a=e.data,l=Object(o.useState)(n),u=l[0],f=l[1],s=Object(o.useState)(a||i),d=s[0],v=s[1],m=Object(o.createRef)(),h=Object(o.createRef)();Object(o.useEffect)((function(){f(n),v(a)}),[n,a]),Object(o.useEffect)((function(){return m.current&&h.current&&S({parent:h.current,canvas:m.current,mode:u,data:d}),function(){R()}}),[m,h,u,d]);return r.a.createElement("div",{className:"canvas-workflow"},r.a.createElement("div",{className:"cw-tools"},r.a.createElement("div",{className:""},r.a.createElement("div",null,"Tool Box"))),r.a.createElement("div",{className:"cw-wrapper",ref:h},r.a.createElement("canvas",{ref:m})),r.a.createElement("div",{className:"cw-settings",onClick:function(){return f("viewer")}},r.a.createElement("div",null,"settings"),r.a.createElement("button",{onClick:function(){var e,t,n=Math.floor(Math.random()*((null===(e=m.current)||void 0===e?void 0:e.width)||100)),o=Math.floor(Math.random()*((null===(t=m.current)||void 0===t?void 0:t.height)||100)),r={type:"box",x:n,y:o,w:100,h:100,fillColor:"green",text:"Random "+n+":"+o};v(c({},d,{components:[].concat((null===d||void 0===d?void 0:d.components)||[],[r])}))}},"Add Random Box"),r.a.createElement("button",{onClick:function(){v(c({},d,{components:[]})),p(d)}},"Clear All")))},M=(n(10),function(){var e=Object(o.useState)(),t=Object(l.a)(e,2),n=t[0],i=t[1];Object(o.useEffect)((function(){i({components:[{type:"box",text:"Rumesh",x:10,y:10,w:100,h:100,fillColor:"red",strokeColor:"green",lineWidth:1}]})}),[]);return r.a.createElement("div",null,r.a.createElement(N,{mode:"editor",data:n,onDataChange:function(e){i(e)}}))});a.a.render(r.a.createElement(M,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.f672c105.chunk.js.map